{% extends "layout.html" %}

{% block title %}
    Checkin
{% endblock %}

{#<!-- {% block links %}
<!-- Bootstrap CSS --
<link rel="stylesheet" href="/static/bootstrap-4.0.0-dist/css/bootstrap.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
{% endblock %} -->#}

{% block css %}href="/static/css/checkin.css"{% endblock %}

{% block info %}            <div class="emp_info">
    <h2>{{employee_info[0]["first_name"]}}, {{employee_info[0]["role"]}}</h2>
</div>{% endblock %}

{% block main %}

{% if warning == 1 %}
   <div class="alert alert-warning" role="alert">
      <i class="bi bi-exclamation-triangle-fill"></i> 
      Choose Title!
   </div>
{% elif warning == 2 %}
    <div class="alert alert-warning" role="alert">
        <i class="bi bi-exclamation-triangle-fill"></i>
        Choose Patient!
    </div>
{% elif warning == 3 %}
    <div class="alert alert-warning" role="alert">
        <i class="bi bi-exclamation-triangle-fill"></i>
        Choose Room!
    </div>
{% elif warning == 4 %}
    <div class="alert alert-warning" role="alert">
        <i class="bi bi-exclamation-triangle-fill"></i>
        Choose Check in date!
    </div>
{% elif warning == 5 %}
    <div class="alert alert-warning" role="alert">
        <i class="bi bi-exclamation-triangle-fill"></i>
        Choose Check out date!
    </div>
{% elif warning == 6 %}
    <div class="alert alert-warning" role="alert">
        <i class="bi bi-exclamation-triangle-fill"></i>
        Choose payment!
    </div>
{% elif warning == 7 %}
    <div class="alert alert-warning" role="alert">
        <i class="bi bi-exclamation-triangle-fill"></i>
        Choosen room is not in rooms options!
    </div>
{% endif %}
<!--  -->
{% if (employee_info[0]["role"] == "Admin") or (employee_info[0]["role"] == "Receptionist") or (employee_info[0]["role"] == "Reporter") or (employee_info[0]["role"] == "Reception manager") and (employee_info[0]["status"] == "Working") %}

    <div class="container">
        <div class="content ">
            <form class="form-detail" action="/checkin" method="post" id="myform">

                <div class="label">Booking Infomation</div>

                <div class="form-control">
                    <!--  -->
                    <select name="patient" required>
                        <option selected disabled>patient name</option>
                        {% for patient in patients_data %}
                            <!--  -->
                            {% if patient["middle_name"] %}
                                <option value="{{patient['id']}}">
                                    <p>{{patient["first_name"]}}</p>
                                    <p> {{patient["middle_name"]}}</p>
                                    <p> {{patient["last_name"]}}</p>
                                </option>
                            <!--  -->
                            {% else %}
                                <option value="{{patient['id']}}">
                                    <p>{{patient["first_name"]}}</p>
                                    <p> {{patient["last_name"]}}</p>
                                </option>
                            {% endif %}
                        {% endfor %}
                    </select>
                    <span class="select-btn">
                        <i class="bi bi-chevron-down"></i>
                    </span>
                </div>

                <div class="form-control">
                    <!--  -->
                    <select name="room" required>
                        <option selected disabled>room , price</option>
                        {% for room in rooms_data %}
                            <option value="{{room['room_number']}}">
                                <p>{{room["room_number"]}}</p>
                                <p>, {{room["price"]}}</p>
                            </option>
                        {% endfor %}
                    </select>
                    <span class="select-btn">
                        <i class="bi bi-chevron-down"></i>
                    </span>
                </div>
                <div class="form-row">
                <!-- Date input-->
                    <p class="dateslabel">Checkin Date</p>
                    <input type="date" name="checkin_date" id="checkin_date" value="{{today_date}}" min="{{today_date}}" required>
                    <p class="dateslabel">Checkout Date</p>
                    <input type="date" name="checkout_date" id="checkout_date" value="{{today_date}}" min="{{today_date}}" required>
                </div>

                <div class="form-control">
                    <div class="form-row form-row-1">
                        <!--  -->
                        <select name="payment" required>
                            <option selected disabled>payment</option>
                            {% for payment in payment_values %}
                                <option value="{{payment}}">{{payment}}</option>
                            {% endfor %}
                        </select>
                        <span class="select-btn">
                            <i class="bi bi-chevron-down"></i>
                        </span>
                    </div>
                </div>
                <!--  -->
                <div class="form-row-last">
                    <button type="submit" name="register" class="register">Room Registeration</button>
                </div>
            </div>

        </form>
    </div>
    </div>
{% else %}
    <div class="alert alert-danger" role="alert">
        <i class="bi bi-exclamation-octagon-fill"></i>
        Invalid role or suspicious action!
    </div>
{% endif %}

{% endblock %}